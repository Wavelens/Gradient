{% extends 'dashboard/index.html' %}

{% block title %}Log{% endblock %}

{% block content %}

<head>{% load static %}</head>

<!-- <header>
    <nav role="navigation">
        <a href="/#home"><img class="center-image" src="../static/dashboard/icons/command.svg"><span>Workflows</span></a>
        <a class="active" href="ai-development"><img class="center-image" src="../static/dashboard/icons/activity.svg"><span>Log</span></a>
    </nav>
</header> -->

<div class="content-above">
    <div><a href="/#home"><img class="center-image" src="../static/dashboard/icons/arrow_back.svg"><span>Back</span></a></div>
    <h2 class="webkit-middle space-small"><img class="green-filter center-image icon" src="{% static 'dashboard/images/check-circle.svg' %}" alt="X Circle">{{ built_name }}<span class="color-light"> #{{ id }}</span></h2>
</div>
<div class="outerbody">
    <div class="content-left">
        <p class="border-bottom space-normal no-side-padding"><a class="space-normal">Overview</a></p>
        <img class="green-filter center-image" src="{% static 'dashboard/images/check-circle.svg' %}" alt="X Circle">
        <a>Build</a>
    </div>
    <div class="innerbody">
        <div>
            <span>{{ built_version }}</span><br>
            <span class="text-light">{{ status}} {{time}}</span>
        </div>
        <br>
        <div>
            <div class="border-bottom">
                <img class="green-filter center-image" src="{% static 'dashboard/images/check-circle.svg' %}" alt="X Circle">
                <span>Build</span>
            </div>
            <!-- <button class="toggle-button">&#9660; Toggle Code</button> -->
            <div class="code-container">
                <!-- <pre id="code">
                    Lorem ipsum dolor sit amet, consetetur sadipscing elitr \n\n
                    , sed diam nonumy eirmod tempor invidunt ut labore et dolore magna \n
                    aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores \n\n
                    et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor \n
                    sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy \n\n
                    eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero \n
                    eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus
                    \n\n est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed 
                    \ndiam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. 
                    \n\nt vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata 
                    \nsanctus est Lorem ipsum dolor sit amet. 
                </pre> -->
                {% for block in details_blocks %}
                    <details class="details-item">
                        <summary>{{ block.summary }}</summary>
                        <div class="details-content">
                            {% for line in block.details %}
                                <div class="line">{{ line }}</div>
                            {% endfor %}
                        </div>
                    </details>
                {% endfor %}
            </div>
        </div>
    </div>
</div>


<script>
    // document.addEventListener('DOMContentLoaded', () => {
    //         const preElement = document.getElementById('code');
    //         const lines = preElement.textContent.split('\n');
    //         const lineHtml = lines.map((line, index) => {
    //             return index === 0
    //                 ? `<span class="first-line">${line}</span>`
    //                 : `<span>${line}</span>`;
    //         }).join('<br>');
            
            
    //         preElement.innerHTML = lineHtml;
    //         preElement.classList.add('line-numbering');

    //         // const toggleButton = document.querySelector('.toggle-button');
    //         // const codeContainer = document.querySelector('.code-container');

    //         // toggleButton.addEventListener('click', () => {
    //         //     codeContainer.classList.toggle('show');
    //         //     toggleButton.innerHTML = codeContainer.classList.contains('show') ? '&#9650; Collapse Code' : '&#9660; Expand Code';
    //         // });
    //     });

    let lineCounter = 1; // Startzähler für die Nummerierung

        document.querySelectorAll('.details-item').forEach(details => {
            // Nummeriere die Zusammenfassung
            const summary = details.querySelector('summary');
            summary.setAttribute('data-line-number', lineCounter++);

            // Nummeriere den Inhalt
            const content = details.querySelector('.details-content');
            content.querySelectorAll('.line').forEach(line => {
                line.setAttribute('data-line-number', lineCounter++);
            });
        });
</script>

{% endblock %}