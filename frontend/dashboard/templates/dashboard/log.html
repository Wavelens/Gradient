{% extends 'dashboard/index.html' %}

{% block title %}Log{% endblock %}

{% block content %}

<head>{% load static %}</head>

<!-- <header>
    <nav role="navigation">
        <a href="/#home"><img class="center-image" src="../static/dashboard/icons/command.svg"><span>Workflows</span></a>
        <a class="active" href="ai-development"><img class="center-image" src="../static/dashboard/icons/activity.svg"><span>Log</span></a>
    </nav>
</header> -->

<div class="content-above">
    <div><a href="/#home" class="flex-c"><img class="center-image" src="../static/dashboard/icons/arrow_back.svg"><span>Back</span></a></div>
    <h2 class="webkit-middle space-small" class="flex-c"><img class="green-filter center-image icon" src="{% static 'dashboard/images/check-circle.svg' %}" alt="X Circle">{{ built_name }}<span class="color-light fw-normal"> #{{ id }}</span></h2>
</div>
<div class="outerbody">
    <div class="content-left">
        <p class="border-bottom space-normal no-side-padding"><a class="space-normal">Overview</a></p>
        <div class="flex-c hovereffect-sidebar">
            <img class="green-filter center-image" src="{% static 'dashboard/images/check-circle.svg' %}" alt="X Circle">
            <a>Build</a>
        </div>
    </div>
    <div class="innerbody">
        <div>
            <span>{{ built_version }}</span><br>
            <span class="text-light">{{ status }} {{ time }}</span>
        </div>
        <br>
        <div>
            <div class="border-bottom flex-c">
                <img class="green-filter center-image" src="{% static 'dashboard/images/check-circle.svg' %}" alt="X Circle">
                <span>Build</span>
            </div>
            <div class="code-container monospace">
                {% for block in details_blocks %}
                    <details class="details-item color-secondary">
                        <summary>{{ block.summary }}</summary>
                        <div class="details-content color-secondary">
                            {% for line in block.details %}
                                <div class="line">{{ line }}</div>
                            {% endfor %}
                        </div>
                    </details>
                {% endfor %}
            </div>
        </div>
    </div>
</div>


<script>
    let lineCounter = 1; 

        document.querySelectorAll('.details-item').forEach(details => {
            
            const summary = details.querySelector('summary');
            summary.setAttribute('data-line-number', lineCounter++);

            const content = details.querySelector('.details-content');
            content.querySelectorAll('.line').forEach(line => {
                line.setAttribute('data-line-number', lineCounter++);
            });
        });
</script>

{% endblock %}